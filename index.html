<!doctype html>

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-151192605-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'UA-151192605-2');
  </script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous">
  </script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
    integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous">
  </script>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Timestamp Converter</title>
  <style>
    .main {
      margin-top: 5%;
      margin-left: 10%;
      margin-right: 10%;
    }

    .date-form {
      display: flex;
    }

    .date-form .inner-form {
      margin: 0.2em;
    }

    .change {
      border-color: rgb(255, 0, 0);
    }

    #clock {
      width: 1em;
      height: 0.1em;
      background-color: #000000;
    }

    .title-main {
      display: flex;
      flex-direction: row;
    }
  </style>
</head>

<body>
  <div class="main">
    <div class="title-main">
      <h1 class="title">Timestamp Conversion </h1>
      <div id="clock"></div>
    </div>
    <div class="form-group">
      <label for="timestamp">Timestamp <span class="type">(Seconds | Unix)</span></label>
      <input class="form-control" id="timestamp">
    </div>
    <div class="form-group">
      <label for="date">Date</label>
      <div class="date-form">
        <div class="inner-form">
          <small>Year</small>
          <input class="form-control date" id="year" placeholder="year">
        </div>
        <div class="inner-form">
          <small>Month</small>
          <input class="form-control date" id="month" placeholder="month">
        </div>
        <div class="inner-form">
          <small>Day</small>
          <input class="form-control date" id="day" placeholder="day">
        </div>
      </div>
      <div class="date-form">
        <div class="inner-form">
          <small>Hours</small>
          <input class="form-control date" id="hour" placeholder="hour">
        </div>
        <div class="inner-form">
          <small>Minutes</small>
          <input class="form-control date" id="min" placeholder="min">
        </div>
        <div class="inner-form">
          <small>Seconds</small>
          <input class="form-control date" id="second" placeholder="second">
        </div>
        <div class="inner-form">
          <small>Milliseconds</small>
          <input class="form-control date" id="milli" placeholder="milli">
        </div>
      </div>
    </div>
    <label for="human-readable">Human Readable</label>
    <table class="table table-hover">
      <tr>
        <td>GMT</td>
        <td class="gmt"></td>
      </tr>
      <tr>
        <td>Local</td>
        <td class="local"></td>
      </tr>
      <tr>
        <td>Locale</td>
        <td class="locale"></td>
      </tr>
      <tr>
        <td>Time</td>
        <td class="time"></td>
      </tr>
    </table>
    <label for="Options">Options</label>
    <p>Working on it</p>
    <label for="description">Description</label>
    <p>Unix time (also known as Epoch time, POSIX time, seconds since the Epoch, or UNIX Epoch time) is a system for describing a point in time. It is the number of seconds that have elapsed since the Unix epoch, minus leap seconds; the Unix epoch is 00:00:00 UTC on 1 January 1970. Leap seconds are ignored, with a leap second having the same Unix time as the second before it, and every day is treated as if it contains exactly 86400 seconds. Due to this treatment, Unix time is not a true representation of UTC.</p>
    <P>유닉스 시간(영어: Unix time)은 시각을 나타내는 방식이다. POSIX 시간이나 Epoch 시간이라고 부르기도 한다. 1970년 1월 1일 00:00:00 협정 세계시(UTC) 부터의 경과 시간을 초로 환산하여 정수로 나타낸 것이다. 유닉스 시간에서 윤초는 무시된다. 유닉스 계열 운영 체제나 여러 다른 운영 체제, 그리고 파일 형식들에서 사용된다. 윤초 처리 방식 때문에 시간을 선형으로 표현하지 못하며, 협정 세계시의 윤초를 표현할 수 없다. 유닉스 시간은 대다수의 유닉스 운영 체제에서 date +%s를 명령행에 입력하여 확인할 수 있다. 32비트로 표현된 유닉스 시간은 1970년 1월 1일 00:00 (UTC)에서 2,147,483,647 (231 - 1) 지난 후인 2038년 1월 19일 03:14:08 UTC에 2038년 문제를 발생시킨다. 이는 산술 오버플로와 관련 있는 문제이다.</P>
    <p>UNIX時間（ユニックスじかん）またはUNIX時刻（ユニックスじこく、UNIX time（ユニックスタイム）、POSIX time（ポジックスタイム））とはコンピューターシステム上での時刻表現の一種。UNIXエポック、すなわち協定世界時 (UTC) での1970年1月1日午前0時0分0秒から形式的な経過秒数（すなわち、実質的な経過秒数から、その間に挿入された閏秒を引き、削除された閏秒を加えたもの）として表される。GPS時刻などとは異なり、大多数のシステムでは、本当の経過秒数を表すものではない。 UNIX系のオペレーティングシステム（データ型はtime_t）だけでなく、他の多くのオペレーティングシステムにおいてもこの表現方法が用いられている。システム内部では32ビットまたは64ビットの符号付整数 (signed int) で扱われていることが普通である。ここで、以前は多かった32ビットで扱われている場合で、符号付きであった場合、その最大値 2,147,483,647 を超えると負の値になり、正しく時刻を扱えなくなるという問題がある。これを2038年問題という。</p>
    <p>UNIX時間，或稱POSIX時間是UNIX或類UNIX系統使用的時間表示方式：從UTC1970年1月1日0時0分0秒起至現在的總秒數，不考慮閏秒。 在多數Unix系統上Unix時間可以透過date +%s指令來檢查 1970年， Unix正式诞生，在第一版《Unix Programmer's Manual》中把“1971年11月3日”定义为“自1970年1月1日0時0分0秒以来以1/60秒为单位的时间”。此后，这个定义由于可定义的时间范围，时区，闰秒等问题被重新定义。</p>
  </div>
</body>

</html>
<script src="./js/anime/anime.min.js"></script>

<script>
  let time = Math.floor(Date.now() / 1000);
  let date = new Date(time * 1000);
  let auto = true;


  $(document).ready(function () {
    anime({
      targets: document.querySelector('#timestamp'),
      value: [0, time],
      easing: 'easeInOutExpo',
      round: 1
    });
    setFirst(date);
  });


  // loop
  setInterval(function () {
    if (auto) {
      let time = Math.floor(Date.now() / 1000);
      let date = new Date(time * 1000);
      $('#timestamp').val(time);
      set(date);
    }
  }, 1000);

  anime({
    targets: '#clock',
    loop: true,
    rotate: {
      value: 360,
      duration: 10000,
      easing: 'linear'
    }
  });

  // timestamp to date
  $('#timestamp').on('change', (event) => {
    switch (event.currentTarget.value.length) {
      case 10:
        $('.type').text('(Seconds | Unix)')
        set(new Date(Number(event.currentTarget.value) * 1000));
        break;
      case 13:
        $('.type').text('(Milliseconds)')
        set(new Date(Number(event.currentTarget.value)));
        break;
      default:
        $('.type').text('(Unkown)');
        break;
    }
  })

  $('#timestamp').on('click', () => {
    auto = false;
  })

  $('.date').on('click', () => {
    auto = false;
  })

  // date to timestamp
  $('.date').on('change', () => {
    let _date = new Date($('#year').val(), $('#month').val() - 1, $('#day').val(), $('#hour').val(), $('#min')
    .val(), $('#second').val());
    $('#timestamp').val(Math.floor(_date.getTime() / 1000));
    set(_date);
  })

  function set(_date) {
    $('.gmt').text(_date.toGMTString());
    $('.local').text(_date.toString());
    $('.locale').text(_date.toLocaleString());
    $('.time').text(_date.getHours() + ':' + _date.getMinutes() + ':' + _date.getSeconds());
    let year = _date.getFullYear();
    let month = _date.getMonth() + 1;
    let day = _date.getDate();
    let hours = _date.getHours();
    let min = _date.getMinutes();
    let seconds = _date.getSeconds();
    if ($('#year').val() != year) {
      $('#year').val(year);
    }
    if ($('#month').val() != month) {
      $('#month').val(month);
    }
    if ($('#day').val() != day) {
      $('#day').val(day);
    }
    if ($('#hour').val() != hours) {
      $('#hour').val(hours);
    }
    if ($('#min').val() != min) {
      $('#min').val(min);
    }
    if ($('#second').val() != seconds) {
      $('#second').val(seconds);
    }
    $('#milli').val(_date.getMilliseconds());
  }

  function setFirst(_date) {
    $('.gmt').text(_date.toGMTString());
    $('.local').text(_date.toString());
    $('.locale').text(_date.toLocaleString());
    $('.time').text(_date.getHours() + ':' + _date.getMinutes() + ':' + _date.getSeconds());
    anime({
      targets: document.querySelector('#year'),
      value: [0, _date.getFullYear()],
      easing: 'easeInOutExpo',
      round: 1
    });
    anime({
      targets: document.querySelector('#month'),
      value: [0, _date.getMonth() + 1],
      easing: 'easeInOutExpo',
      round: 1
    });
    anime({
      targets: document.querySelector('#day'),
      value: [0, _date.getDate()],
      easing: 'easeInOutExpo',
      round: 1
    });
    anime({
      targets: document.querySelector('#hour'),
      value: [0, _date.getHours()],
      easing: 'easeInOutExpo',
      round: 1
    });
    anime({
      targets: document.querySelector('#min'),
      value: [0, _date.getMinutes()],
      easing: 'easeInOutExpo',
      round: 1
    });
    anime({
      targets: document.querySelector('#second'),
      value: [0, _date.getSeconds()],
      easing: 'easeInOutExpo',
      round: 1
    });
  }
</script>
